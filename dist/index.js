'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.Validator=void 0;var _slicedToArray=function(){function sliceIterator(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return sliceIterator(a,b);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(a,b,c){return b&&defineProperties(a.prototype,b),c&&defineProperties(a,c),a}}(),_validator=require('./validator');Object.defineProperty(exports,'Validator',{enumerable:!0,get:function get(){return _interopRequireDefault(_validator).default}});var _validator2=_interopRequireDefault(_validator),_lodash=require('lodash'),_flatten=require('./flatten'),_flatten2=_interopRequireDefault(_flatten);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Vlidator=function(){function Vlidator(){_classCallCheck(this,Vlidator)}return _createClass(Vlidator,[{key:'install',value:function install(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.locale,d=void 0===c?'en':c,e=b.customMessages,f=void 0===e?{}:e;a.mixin({beforeCreate:function beforeCreate(){this.$options.$vlidator={};var b=this.$data||{};a.util.defineReactive(this.$options,'$vlidator',new _validator2.default(b,{},d,f)),this.$options.computed||(this.$options.computed={}),this.$options.computed.$vlidator=function(){return this.$options.$vlidator}},created:function created(){var a=this,b=a.$options.vlidator;if(b&&b.rules){var c=b.rules,e=void 0===c?{}:c;Object.entries((0,_flatten2.default)(a.$data)).forEach(function(b){var c=_slicedToArray(b,2),g=c[0],h=c[1],i=(0,_lodash.get)(e,g);void 0!==i&&a.$watch(g,function(){var b=getData({rules:e,data:a.$data}),c=new _validator2.default(b,e,d,f);if(c.check(),a.$options.$vlidator=c,!(0,_lodash.isUndefined)(a.$errors)&&(0,_lodash.isFunction)(a.$errors.fill)){var g=c.errors.all()||{};a.$errors.fill(g)}})})}}})}}]),Vlidator}(),getData=function getData(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b={},c=a.rules,d=c===void 0?{}:c,e=a.data,f=e===void 0?{}:e;for(var g in d)f.hasOwnProperty(g)&&Object.assign(b,_defineProperty({},g,f[g]));return b};/**
 * Get Data
 * @param {Object} payload
 * @returns {Object}
 */exports.default=new Vlidator;